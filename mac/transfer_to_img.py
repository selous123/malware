#coding:utf-8
import numpy as np
import os
import math
from PIL import Image
from collections import defaultdict
size = 256,256

CLASS = "pua"


#transform byte file to image
def transform_to_img(dirPath,path):
    f = open(dirPath+"/"+path,'rb')
    content = f.read()
    l = [ord(c) for c in content]
    width = int(math.floor(math.sqrt(len(l))))
    img = Image.fromarray(np.resize(np.uint8(np.array(l)),(width,width)))
    #compress
    img = img.resize((size),Image.ANTIALIAS)
    #print img
    #io.imsave("img/"+path.split("/")[1].split(".")[0]+".jpg",img)
    
    #labelDict = generate_label_dict()

    file_name = str(path.split(".")[0])
    img.save("/mnt/hgfs/ubuntu14/dataset/2017-05-09_av_test/img/"+CLASS+"/"+file_name+".jpg")

def readFile(dirPath):
    paths = os.listdir(dirPath)
    print paths[0]
    for path in paths:
        transform_to_img(dirPath,path)

if __name__=='__main__':
    readFile("/mnt/hgfs/ubuntu14/dataset/2017-05-09_av_test/"+CLASS)